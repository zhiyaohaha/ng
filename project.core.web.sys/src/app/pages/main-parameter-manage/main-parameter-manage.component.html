<md-sidenav-container class="example-container" [@fadeInUpState]="'active'">
    <!-- <td-search-input placeholder="Search here" [showUnderline]="true" [debounce]="500" (searchDebounce)="searchInputTerm = $event" (search)="searchInputTerm = $event" (clear)="searchInputTerm = ''">
    </td-search-input>
    <td-search-box placeholder="Search here" [showUnderline]="true" [debounce]="500" [alwaysVisible]="false" (searchDebounce)="searchInputTerm = $event" (search)="searchInputTerm = $event" (clear)="searchInputTerm = ''">
    </td-search-box> -->
    <md-sidenav #sidenav class="example-sidenav container-fluid" align="end" (open-start)="sidenavOpen()" (close)="closeEnd()">
        <div class="row">
            <div class="col-lg-4 sidenav-left">
                <div class="sidenav-container">
                    <!-- <free-tree [menus]="menus"></free-tree> -->
                    <tree [tree]="tree" (nodeSelected)="treeSelected($event)" (onAddChild)="addChild($event)"></tree>
                </div>
            </div>
            <div class="col-lg-8" *ngIf="selectNode">
                <button md-button style="display:none;">编辑</button>
                <button md-button style="display:none;">添加</button>
                <button md-button style="display:none;">删除</button>
                <md-tab-group>
                    <md-tab label="修改">
                        <form #sysParams="ngForm">
                            <md-list>
                                <md-list-item *ngFor="let item of modalDOMS">
                                    <div class="form-group" [ngSwitch]="item.ui.displayType">
                                        <md-input-container *ngSwitchCase="'text'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" [disabled]="item.ui.isDisabled">
                                        </md-input-container>
                                        <md-input-container *ngSwitchCase="'hidden'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" disabled="{{item.ui.isDisabled}}">
                                        </md-input-container>
                                        <div *ngSwitchCase="'textarea'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <!-- <input mdInput id="" placeholder="{{item.ui.placeholder}}" value="{{item.value}}" disabled="{{item.ui.isDisabled}}"> -->
                                            <textarea ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" [disabled]="item.ui.isDisabled"></textarea>
                                        </div>
                                        <md-select *ngSwitchCase="'select'" placeholder="Favorite food" (change)="changed($event)">
                                            <md-option *ngFor="let food of foods" [value]="food.value">
                                                {{ food.viewValue }}
                                            </md-option>
                                        </md-select>
                                        <div *ngSwitchCase="'daterange'">
                                            <md-input-container>
                                                <input mdInput [mdDatepicker]="picker" placeholder="起始时间">
                                                <button mdSuffix [mdDatepickerToggle]="picker"></button>
                                            </md-input-container>
                                            <md-datepicker #picker></md-datepicker>
                                            &nbsp;&nbsp;--&nbsp;&nbsp;
                                            <md-input-container>
                                                <input mdInput [mdDatepicker]="picker2" placeholder="截至时间">
                                                <button mdSuffix [mdDatepickerToggle]="picker2"></button>
                                            </md-input-container>
                                            <md-datepicker #picker2></md-datepicker>
                                        </div>
                                        <md-list-item *ngSwitchCase="'tags'">
                                            <free-chip-group [chips]="treeNode.label" placeholder="回车添加标签" (chipsChange)="chipsChange($event)"></free-chip-group>
                                            <input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">
                                        </md-list-item>
                                    </div>
                                </md-list-item>
                                <!-- <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="code" disabled value="{{treeNode.code}}">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="名称" [(ngModel)]="treeNode.value">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="描述" [(ngModel)]="treeNode.desc">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <free-chip-group [chips]="treeNode.label" placeholder="回车添加标签" (chipsChange)="chipsChange($event)"></free-chip-group>
                            </md-list-item> -->
                            </md-list>


                            <div class="form-group" style="display:none;">
                                <md-select placeholder="Favorite food">
                                    <md-option *ngFor="let food of foods" [value]="food.value">
                                        {{ food.viewValue }}
                                    </md-option>
                                </md-select>
                            </div>
                            <div class="form-group">
                                <!-- <button fButton color="blue" (click)="onSubmitParams($event)" [disabled]="!selectNode">确定</button> -->
                                <button fButton color="blue" (click)="onSubmitParams(sysParams.value)" type="button">保存修改</button>
                            </div>
                        </form>
                    </md-tab>
                    <md-tab label="添加">
                        <form #sysParams="ngForm">
                            <md-list>
                                <md-list-item *ngFor="let item of modalDOMS">
                                    <div class="form-group" [ngSwitch]="item.ui.displayType">
                                        <md-input-container *ngSwitchCase="'text'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" [disabled]="item.ui.isDisabled">
                                        </md-input-container>
                                        <md-input-container *ngSwitchCase="'hidden'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" disabled="{{item.ui.isDisabled}}">
                                        </md-input-container>
                                        <div *ngSwitchCase="'textarea'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                                            <!-- <input mdInput id="" placeholder="{{item.ui.placeholder}}" value="{{item.value}}" disabled="{{item.ui.isDisabled}}"> -->
                                            <textarea ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" [disabled]="item.ui.isDisabled"></textarea>
                                        </div>
                                        <md-select *ngSwitchCase="'select'" placeholder="Favorite food" (change)="changed($event)">
                                            <md-option *ngFor="let food of foods" [value]="food.value">
                                                {{ food.viewValue }}
                                            </md-option>
                                        </md-select>
                                        <div *ngSwitchCase="'daterange'">
                                            <md-input-container>
                                                <input mdInput [mdDatepicker]="picker" placeholder="起始时间">
                                                <button mdSuffix [mdDatepickerToggle]="picker"></button>
                                            </md-input-container>
                                            <md-datepicker #picker></md-datepicker>
                                            &nbsp;&nbsp;--&nbsp;&nbsp;
                                            <md-input-container>
                                                <input mdInput [mdDatepicker]="picker2" placeholder="截至时间">
                                                <button mdSuffix [mdDatepickerToggle]="picker2"></button>
                                            </md-input-container>
                                            <md-datepicker #picker2></md-datepicker>
                                        </div>
                                        <md-list-item *ngSwitchCase="'tags'">
                                            <free-chip-group [chips]="treeNode.label" placeholder="回车添加标签" (chipsChange)="chipsChange($event)"></free-chip-group>
                                            <input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">
                                        </md-list-item>
                                    </div>
                                </md-list-item>
                                <!-- <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="code" disabled value="{{treeNode.code}}">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="名称" [(ngModel)]="treeNode.value">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <div class="form-group">
                                    <md-input-container>
                                        <input mdInput id="" placeholder="描述" [(ngModel)]="treeNode.desc">
                                    </md-input-container>
                                </div>
                            </md-list-item>
                            <md-list-item>
                                <free-chip-group [chips]="treeNode.label" placeholder="回车添加标签" (chipsChange)="chipsChange($event)"></free-chip-group>
                            </md-list-item> -->
                            </md-list>


                            <div class="form-group" style="display:none;">
                                <md-select placeholder="Favorite food">
                                    <md-option *ngFor="let food of foods" [value]="food.value">
                                        {{ food.viewValue }}
                                    </md-option>
                                </md-select>
                            </div>
                            <div class="form-group">
                                <!-- <button fButton color="blue" (click)="onSubmitParams($event)" [disabled]="!selectNode">确定</button> -->
                                <button fButton color="blue" (click)="onSubmitParams(sysParams.value)" type="button">保存修改</button>
                            </div>
                        </form>
                    </md-tab>
                </md-tab-group>

            </div>
        </div>
    </md-sidenav>

    <div class="main-container">
        <ul class="search-ul">
            <li *ngFor="let item of searchFilters">
                <div [ngSwitch]="item.ui.displayType">
                    <md-input-container *ngSwitchCase="'text'" [ngStyle]="{'display': item.ui.isHidden ? 'none' : 'show'}">
                        <input mdInput placeholder="{{item.ui.placeholder}}" [value]="item.value" [name]="item.name" (input)="searchParam($event)" [disabled]="item.ui.isDisabled">
                    </md-input-container>
                    <div *ngSwitchCase="'daterange'">
                        <md-input-container>
                            <input mdInput [mdDatepicker]="picker" placeholder="起始时间">
                            <button mdSuffix [mdDatepickerToggle]="picker"></button>
                        </md-input-container>
                        <md-datepicker #picker></md-datepicker>
                        &nbsp;&nbsp;--&nbsp;&nbsp;
                        <md-input-container>
                            <input mdInput [mdDatepicker]="picker2" placeholder="截至时间">
                            <button mdSuffix [mdDatepickerToggle]="picker2"></button>
                        </md-input-container>
                        <md-datepicker #picker2></md-datepicker>
                    </div>
                    <div *ngSwitchCase="'select'">
                        <md-select placeholder="Favorite food" (change)="changed($event)">
                            <md-option *ngFor="let food of foods" [value]="food.value">
                                {{ food.viewValue }}
                            </md-option>
                        </md-select>
                    </div>
                </div>
            </li>
            <li style="display:none;">
                <md-input-container>
                    <input mdInput placeholder="搜索" [value]="searchValue">
                </md-input-container>
            </li>
            <li style="display:none;">
                <md-select placeholder="Favorite food" (change)="changed($event)">
                    <md-option *ngFor="let food of foods" [value]="food.value">
                        {{ food.viewValue }}
                    </md-option>
                </md-select>
            </li>
            <li>
                <button fButton color="deepblue" (click)="searchParams()">搜索</button>
            </li>
        </ul>

    </div>

    <td-data-table #dataTable [data]="filteredData" [columns]="columns" [clickable]="true" (rowClick)="rowClickEvent($event);sidenav.open();" (rowSelect)="rowSelectEvent($event)">
        <!-- <ng-template tdDataTableTemplate="food.type" let-value="value" let-row="row" let-column="column">
            <div layout="row">
                <span flex>{{value}}</span>
                <md-icon>star</md-icon>
            </div>
        </ng-template>-->
        <ng-template tdDataTableTemplate="op" let-value="value" let-row="row" let-column="column">
            <div layout="row">
                <div class="example-sidenav-content">
                    <button type="button" md-button (click)="sidenav.open();">查看更多</button>
                </div>
            </div>
        </ng-template>
    </td-data-table>

    <table td-data-table style="display:none;">
        <th td-data-table-column *ngFor="let column of columns" [numeric]="column.numeric">
            {{column.label}}
        </th>
        <th td-data-table-column>
            <span>Comments</span>
        </th>
        <th td-data-table-column>
            操作
        </th>
        <tr td-data-table-row *ngFor="let row of filteredData">
            <td td-data-table-cell *ngFor="let column of columns" [numeric]="column.numeric">
                {{column.format ? column.format(row[column.name]) : row[column.name]}}
            </td>
            <td td-data-table-cell>
                <a href="javascript:;" (click)="addComment(row, 'comments')" [class.mat-accent]="!row['comments']">{{row['comments'] || 'Add Comment'}}</a>
            </td>
            <td td-data-table-cell>
                <div class="example-sidenav-content">
                    <button type="button" md-button (click)="sidenav.open();onOpen()">查看更多</button>
                </div>
            </td>
        </tr>
    </table>

    <div class="md-padding" *ngIf="!dataTable.hasData" layout="row" layout-align="center center">
        <h3>No results to display.</h3>
    </div>
    <td-paging-bar #pagingBar [pageSizes]="pageSizes" [total]="filteredTotal" (change)="page($event)" [pageLinkCount]="pageLinkCount">
        <span td-paging-bar-label hide-xs>每页条数:</span> {{pagingBar.range}} <span hide-xs>of {{pagingBar.total}}</span>
    </td-paging-bar>

    <!-- <button fButton color="red" (click)="openDialog()">打开弹窗</button>
    <button md-button (click)="openDialog()">Open dialog</button>
    <button md-button (click)="openConfirm()">Open dialog</button>
    <button md-button (click)="openPrompt()">Open dialog</button> -->

</md-sidenav-container>