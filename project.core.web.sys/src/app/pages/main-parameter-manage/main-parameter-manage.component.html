<md-sidenav-container class="example-container" [@fadeInState]="'active'">
  <md-sidenav #sidenav class="example-sidenav container-fluid" position="end" (open-start)="sidenavOpen()"
              (close)="closeEnd()">
    <div class="row">
      <div class="sidenav-left" *ngIf="!isNew">
        <div class="sidenav-container">
          <ng-container *ngIf="!tree">loading</ng-container>
          <tree [tree]="tree" (nodeSelected)="treeSelected($event)" (onAddChild)="addChild($event)"></tree>
        </div>
      </div>
      <div class="sidenav-right" *ngIf="selectNode">
        <md-tab-group>
          <md-tab label="修改" *ngIf="authorities.indexOf(authorityKey+'.Update') != -1">
            <timi-responsive-form [modelDOMS]="modalDOMS" [modelDOMSData]="selectNode.JSONdata" btnValue="确定修改"
                                  (ngSubmit)="onSubmitParams($event)"></timi-responsive-form>
            <!--<form #sysParams="ngForm">-->
              <!--<ng-container *ngFor="let item of modalDOMS">-->
                <!--<div class="panel" [ngSwitch]="item.ui.displayType">-->
                  <!--<div class="form-group columns{{item.ui.columns}}" *ngSwitchCase="'HtmlDomDisplayType.Text'"-->
                       <!--[ngStyle]="{'display': item.ui.hidden ? 'none' : 'show'}">-->
                    <!--<timi-input ngModel [labelName]="item.ui.label" name="{{item.name}}"-->
                                <!--[(ngModel)]="selectNode.JSONdata[item.name]"-->
                                <!--[value]="selectNode.JSONdata[item.name]"-->
                                <!--[placeholder]="item.ui.placeholder" [columns]="item.ui.columns"></timi-input>-->
                  <!--</div>-->
                  <!--&lt;!&ndash;<md-form-field *ngSwitchCase="'HtmlDomDisplayType.Text'"&ndash;&gt;-->
                  <!--&lt;!&ndash;[ngStyle]="{'display': item.ui.hidden ? 'none' : 'block'}">&ndash;&gt;-->
                  <!--&lt;!&ndash;<input mdInput ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}"&ndash;&gt;-->
                  <!--&lt;!&ndash;[(ngModel)]="selectNode.JSONdata[item.name]" [disabled]="item.ui.disabled"&ndash;&gt;-->
                  <!--&lt;!&ndash;spellcheck="false">&ndash;&gt;-->
                  <!--&lt;!&ndash;</md-form-field>&ndash;&gt;-->
                  <!--<input *ngSwitchCase="'HtmlDomDisplayType.Hidden'" ngModel type="hidden" name="{{item.name}}"-->
                         <!--placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode.JSONdata[item.name]"-->
                         <!--disabled="{{item.ui.disabled}}" spellcheck="false"-->
                         <!--[ngStyle]="{'display': item.ui.hidden ? 'none' : 'block'}">-->
                  <!--&lt;!&ndash; <md-form-field *ngSwitchCase="'HtmlDomDisplayType.Hidden'" [ngStyle]="{'display': item.ui.hidden ? 'none' : 'block'}">-->
                      <!--<input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode.JSONdata[item.name]" disabled="{{item.ui.disabled}}" spellcheck="false">-->
                  <!--</md-form-field> &ndash;&gt;-->
                  <!--<div *ngSwitchCase="'HtmlDomDisplayType.Textarea'"-->
                       <!--[ngStyle]="{'display': item.ui.hidden ? 'none' : 'block'}">-->
                    <!--<timi-textarea ngModel name="{{item.name}}" [(ngModel)]="selectNode.JSONdata[item.name]"-->
                                   <!--[labelName]="item.ui.label"-->
                                   <!--[placeholder]="item.ui.placeholder" [columns]="item.ui.columns"></timi-textarea>-->
                    <!--&lt;!&ndash;<textarea ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}"&ndash;&gt;-->
                    <!--&lt;!&ndash;[(ngModel)]="selectNode.JSONdata[item.name]" [disabled]="item.ui.disabled"&ndash;&gt;-->
                    <!--&lt;!&ndash;spellcheck="false"></textarea>&ndash;&gt;-->
                  <!--</div>-->
                  <!--<md-select *ngSwitchCase="'HtmlDomDisplayType.Select'" placeholder="Favorite food"-->
                             <!--(change)="changed($event)">-->
                    <!--<md-option *ngFor="let food of foods" [value]="food.value">-->
                      <!--{{ food.viewValue }}-->
                    <!--</md-option>-->
                  <!--</md-select>-->
                  <!--<div *ngSwitchCase="'HtmlDomDisplayType.Daterange'">-->
                    <!--<md-form-field>-->
                      <!--<input mdInput [mdDatepicker]="picker" placeholder="起始时间">-->
                      <!--&lt;!&ndash; <button mdSuffix [mdDatepickerToggle]="picker"></button> &ndash;&gt;-->
                      <!--<md-datepicker-toggle mdSuffix [for]="picker"></md-datepicker-toggle>-->
                      <!--<md-datepicker #picker></md-datepicker>-->
                    <!--</md-form-field>-->
                    <!--<md-datepicker #picker></md-datepicker>-->
                    <!--&nbsp;&nbsp;&#45;&#45;&nbsp;&nbsp;-->
                    <!--<md-form-field>-->
                      <!--<input mdInput [mdDatepicker]="picker2" placeholder="截至时间">-->
                      <!--&lt;!&ndash; <button mdSuffix [mdDatepickerToggle]="picker2"></button> &ndash;&gt;-->
                      <!--<md-datepicker-toggle mdSuffix [for]="picker2"></md-datepicker-toggle>-->
                      <!--<md-datepicker #picker2></md-datepicker>-->
                    <!--</md-form-field>-->
                    <!--<md-datepicker #picker2></md-datepicker>-->
                  <!--</div>-->
                  <!--<div class="form-group columns{{item.ui.columns}}" *ngSwitchCase="'HtmlDomDisplayType.Upload'">-->
                    <!--<timi-file-uploader ngModel name="{{item.name}}" [(ngModel)]="selectNode.JSONdata[item.name]" [btnName]="item.ui.label" (success)="uploaded($event)"-->
                                        <!--(files)="selected($event)"-->
                                        <!--[src]="selectNode.JSONdata['_'+item.name]"></timi-file-uploader>-->
                  <!--</div>-->
                  <!--<ng-container class="form-group" *ngSwitchCase="'HtmlDomDisplayType.Tags'">-->
                    <!--&lt;!&ndash;<free-chip-group [chips]="_tags" [placeholder]="item.ui.placeholder"&ndash;&gt;-->
                    <!--&lt;!&ndash;(chipsChange)="chipsChange($event)"></free-chip-group>&ndash;&gt;-->
                    <!--&lt;!&ndash;<input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">&ndash;&gt;-->
                    <!--<timi-chip-group [chips]="tags || []" [placeholder]="item.ui.placeholder" [labeName]="item.ui.label"-->
                                     <!--(chipsChange)="chipsChange($event)" [columns]="item.ui.columns"-->
                                     <!--onkeydown="if(event.keyCode==13){return false;}"></timi-chip-group>-->
                    <!--<input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">-->
                  <!--</ng-container>-->
                  <!--&lt;!&ndash;<md-list-item *ngSwitchCase="'HtmlDomDisplayType.Tags'">&ndash;&gt;-->
                  <!--&lt;!&ndash;<free-chip-group [chips]="treeNode.label" [placeholder]="item.ui.placeholder"&ndash;&gt;-->
                  <!--&lt;!&ndash;(chipsChange)="chipsChange($event)"></free-chip-group>&ndash;&gt;-->
                  <!--&lt;!&ndash;<input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">&ndash;&gt;-->
                  <!--&lt;!&ndash;</md-list-item>&ndash;&gt;-->
                <!--</div>-->
              <!--</ng-container>-->
              <!--<div style="text-align: center;padding: 10px;">-->
                <!--<button md-raised-button (click)="onSubmitParams(sysParams.value)">保存修改</button>-->
              <!--</div>-->
            <!--</form>-->
          </md-tab>
          <md-tab label="添加" *ngIf="authorities.indexOf(authorityKey+'.Add') != -1">
            <timi-responsive-form [modelDOMS]="modalDOMS" btnValue="确定新增"
                                  (ngSubmit)="onSubmitAddParams($event)"></timi-responsive-form>
            <!-- <form #addSysParams="ngForm">
                <md-list>
                    <md-list-item *ngFor="let item of modalDOMS">
                        <div class="form-group" [ngSwitch]="item.ui.displayType">
                            <md-form-field *ngSwitchCase="'HtmlDomDisplayType.Text'" [ngStyle]="{'display': item.ui.hidden ? 'none' : 'show'}">
                                <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" value="" [disabled]="item.ui.disabled" spellcheck="false">
                            </md-form-field>
                            <md-form-field *ngSwitchCase="'HtmlDomDisplayType.Hidden'" [ngStyle]="{'display': item.ui.hidden ? 'none' : 'show'}">
                                <input mdInput id="" ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" [(ngModel)]="selectNode[item.name]" disabled="{{item.ui.disabled}}" spellcheck="false">
                            </md-form-field>
                            <div *ngSwitchCase="'HtmlDomDisplayType.Textarea'" [ngStyle]="{'display': item.ui.hidden ? 'none' : 'show'}">
                                <textarea ngModel name="{{item.name}}" placeholder="{{item.ui.placeholder}}" value="" [disabled]="item.ui.disabled" spellcheck="false"></textarea>
                            </div>
                            <md-select *ngSwitchCase="'HtmlDomDisplayType.Select'" placeholder="Favorite food" (change)="changed($event)">
                                <md-option *ngFor="let food of foods" [value]="food.value">
                                    {{ food.viewValue }}
                                </md-option>
                            </md-select>
                            <div *ngSwitchCase="'HtmlDomDisplayType.Daterange'">
                                <md-form-field>
                                    <input mdInput [mdDatepicker]="picker" placeholder="起始时间">
                                    <button mdSuffix [mdDatepickerToggle]="picker"></button>
                                </md-form-field>
                                <md-datepicker #picker></md-datepicker>
                                &nbsp;&nbsp;--&nbsp;&nbsp;
                                <md-form-field>
                                    <input mdInput [mdDatepicker]="picker2" placeholder="截至时间">
                                    <button mdSuffix [mdDatepickerToggle]="picker2"></button>
                                </md-form-field>
                                <md-datepicker #picker2></md-datepicker>
                            </div>
                            <ng-container *ngSwitchCase="'HtmlDomDisplayType.Tags'">
                                <free-chip-group [chips]="" [placeholder]="item.ui.placeholder" (chipsChange)="chipsChange($event)"></free-chip-group>
                                <input ngModel type="hidden" name="{{item.name}}" [(ngModel)]="tags">
                            </ng-container>
                        </div>
                    </md-list-item>
                </md-list>
                <div class="form-group">
                    <button fButton color="blue" (click)="onSubmitAddParams(addSysParams.value)" type="button">确定增加</button>
                </div>
            </form> -->
          </md-tab>
        </md-tab-group>
      </div>
      <div class="sidenav-new" *ngIf="isNew">
        <md-tab-group>
          <md-tab label="添加">
            <timi-responsive-form [modelDOMS]="modalDOMS" btnValue="确定新增"
                                  (ngSubmit)="onSubmitNewAdd($event)"></timi-responsive-form>
          </md-tab>
        </md-tab-group>
      </div>
    </div>
  </md-sidenav>

  <div class="main-container clearfix">
    <search-form [filters]="searchFilters" [condition]="filters" (onSearch)="onSearch($event)"></search-form>
    <button md-raised-button *ngIf="authorities.indexOf(authorityKey+'.Add') != -1" color="deepblue" class="add-button"
            (click)="newAdd();sidenav.open()">添加
    </button>
  </div>

  <app-table #table [data]="filteredData" [columns]="columns" [totals]="filteredTotal"
             [clickAuthority]="authorities.indexOf(authorityKey+'.Detail') || authorities.indexOf(authorityKey+'.Update')"
             [pageLinkCount]="pageLinkCount" (change)="page($event)"
             (rowClick)="rowClickEvent($event);sidenav.open()"></app-table>

</md-sidenav-container>
